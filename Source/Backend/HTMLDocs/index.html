<html>
	<head>
		<title>
			A CSM-Miner dummy 
		</title>
		<style>
			#projectDrawer{
				position: fixed; 
				top: 0; 
				left: 0; 
				min-width: 100%;
				min-height: 100%;
				background-color : white;
				z-index: 999;
				width : 100%;
				height : 100%;
			}
			#add-project{
				height:100%;
				width:100%;
				position:fixed;
				background-color:transparent;
				z-index:9999;
			}
			.projectContainer{
				margin : 10px;
				display: grid;
				grid-gap: 20px;
				grid-template-columns: repeat(auto-fill, 150px);
				grid-template-rows: repeat(auto-fill, 150px);
			}
			#app{
				position : relative;
				border-radius: 25px;
				border: 2px solid #73AD21; 
				width: 150px;
				height: 150px; 
				text-align : center;
				margin : 0;
				background-size: cover;
			}
			#app .centered{
				margin-block-start : 20px;
				text-align : center;
				font-size : 70pt;
			}
			#app .bottom{
				position: absolute;
				top : 110px;
				left: 45px;
				z-index : 2;
			}
			#app:hover{
				box-sizing: border-box;
				-moz-box-sizing: border-box;
				-webkit-box-sizing: border-box;
				border: 2px solid orange;
				cursor :pointer;
			}
			iframe{
				min-width: fit-content;
				background: white;
				min-height: fit-content;
				height: 10em;
				margin: 100px;
				padding: 20px;
				position: relative;
				text-align : center;
				-webkit-box-shadow: 0px 0px 50px -1px rgba(0,0,0,0.79);
				-moz-box-shadow: 0px 0px 50px -1px rgba(0,0,0,0.79);
				box-shadow: 0px 0px 50px -1px rgba(0,0,0,0.79);
			}
			.SUBMIT{
				left : 50%;
				bottom: 10px;
				position: absolute;
			}
			.hideMe{
				visibility : hidden;
			}
			#loading{
				position: fixed;
				left: 50%;
				top: 50%;
			}
			#mainContainer{
				position : fixed;
				left : 0%;
				top : 0%;
				height : 100%;
				width : 100%;
			}
			#mainGraph{
				z-index : 5;
				width: 100%
				height : 100%;
				top :0;
				left : 0;
				
			}
			#statusBar{
				opacity : 0.1;
				-o-transition: .5s;
				-ms-transition: .5s;
				-moz-transition: .5s;
				-webkit-transition: .5s;
				position : fixed;
				left : 0;
				bottom : 0;
				z-index : 9;
				background-color :  grey;
				min-height : fit-content;
				max-height : fit-content;
				min-width : fit-content;
				max-width : fit-content;
			}
			#statusBar:hover { 
				opacity : 1;
			}
			#statusBar:leave {
				opacity : 0.6;
			}
			#views{
				-o-transition: .5s;
				-ms-transition: .5s;
				-moz-transition: .5s;
				-webkit-transition: .5s;
				top: 0;
				background-color: green;
				position : fixed;
				z-index : 9;
				right: 0;
				height : 100%;
			}
			
			#menuBar{
				border-radius : 0 0 5px 5px;
				-o-transition: .5s;
				-ms-transition: .5s;
				-moz-transition: .5s;
				-webkit-transition: .5s;
				top: 0;
				background-color: green;
				position : fixed;
				z-index : 10;
				left: 3em;
				opacity : 0.1;
				min-height : fit-content;
				max-height : fit-content;
				min-width : fit-content;
				max-width : fit-content;
			}
			#menuBar:hover {
				opacity: 1 !important;
			}
			#menuBar:leave {
				opacity : 0 !important;
			}
			
			
			.element{
				margin-left : 5px;
				margin-right : 5px;
				margin-bottom : 15px;
				width: 200px;
				height: 200px;
				background-color : yellow;
			}
			.element:hover {
				box-sizing: border-box;
				-moz-box-sizing: border-box;
				-webkit-box-sizing: border-box;
				border: 2px solid orange;
			}
			.elementUpdate{
				animation : borderUpdate 0.5s linear 3;
			}
			@keyframes borderUpdate {
				50% {
					border: 2px solid orange;
				}
			}
			.scrollable{
				seamless: "seamless";
				overflow: auto;
				-ms-overflow-style: none;  // IE 10+
				scrollbar-width: none;  // Firefox
				min-width: fit-content;
				max-width: fit-content;
				background: grey;
				height: 100%;}
			.scrollable::-webkit-scrollbar{
				display: none;
			}
			.bgEdit{
				background-image : url("./Images/matrix.png");
			}
			#content{
				width: 100%;
				height : 100%;
				text-align : center;
			}
			canvas{
				width: 100%;
				height: 100%;
			}
			#add-project iframe{
				position : fixed;
				z-index : 999;
				left: 45% !important;
				top: 45% !important;
				transform: translate(-45%, -45%) !important;
			}
		</style>
		<script src='state-machine.js'></script>
		<script>
			
			
			function draw(img){
				var ctx = document.getElementById("view").getContext("2d");
				ctx.drawImage(img);
			}
			
			function hideUpload(){
				var ifm = document.getElementById("add-project");
				ifm.classList.add("hideMe");
			}
			
			function resize(){
				var cvs = document.getElementById("view");
				var container = document.getElementById("mainGraph");
				cvs.width = container.clientWidth;
				cvs.height = container.clientHeight;
			}
			
			var timer = setInterval(resize, 100);
			
			function parentCall(check){
				if(check == "FILE_OK"){
					hideUpload();
					location.reload();
				}else if(check != ""){
					alert(check);
				}
			}
			
			function load (e){
				alert("Dummy");
				document.getElementById('projectDrawer').classList.add('hideMe');
			}
			
			function add(){
				var rm = document.getElementById('add-project');
				rm.classList.remove('hideMe');
			}
			
			const formType = {
				REQUEST_FORM: 'RQ',
				YES_NO_FORM: 'YN',
				INFO_FORM: 'IF'
			}
			
			class Form{
				constructor(name, parent){
					this.form = document.createElement('form');
					parent.appendChild(this.form);
					this.form.name = name;
				}
				
				add(element) {
					this.form.appendChild(element);
				}
				
				
				
				get(){
					return this.form;
				}
			}
			
			function mkForm(name,type,parent){
				const f = new Form(name,parent);
				
				switch(type){
					case formType.REQUEST_FORM:
						f.add(document.createElement('label'));
					case formType.YES_NO_FORM:
					
					case formType.INFO_FORM:
					
				}
			}
			
			var client = function(progressFunc,finishFunc){
				
				var req;
				var percent;
				var msg;
				var callOnProgress;
				var callOnFinish;
			
				function updateProgress(e){
					if(e.lengthComputable){
						this.percent = e.loaded / e.total * 100;
						this.callOnProgress(percent);
					}
				}
				function transferFailed(evt){
					this.percent = 0;
					this.msg = "FAIL";
				}
				function transferComplete(evt){
					this.percent = 0;
					this.msg = "OK";
				}
				function transferCanceled(evt){
					this.percent = 0;
					this.msg = "STOPED";
				}
				function transferEnd(evt){
					this.callOnFinish(msg);
				}
				
				function load(uri){
					this.req.open("GET", uri); 
				}
				
				this.req = new XMLHttpRequest()
				this.req.addEventlistner("load", transferComplete);
				this.req.addEventListener("progress", updateProgress);
				this.req.addEventListener("error", transferFailed);
				this.req.addEventListener("abort", transferCanceled);
				this.req.addEventListener("loadend", transferEnd);
				this.callOnProgress = progressFunc;
				this.callOnFinish = finishFunc;
				console.log('client created.');
			}
			var jString = '{{ projects }}';
			
			var dec = jString.replace(/&quot;/g, '"');
			var jsonObj = JSON.parse(dec);
			
			function showProjects(){
				var el = document.getElementById('projectAdds');
				var addDiv = document.getElementsByName('addProj')[0];
				jsonObj.forEach(function(element){
					var pDiv = document.createElement("div");
					pDiv.name = element.filename;
					pDiv.id = "app";
					pDiv.setAttribute("onClick","return load(this);");
					pDiv.style = "background-image: url('" + element.backgroundImgPath +"');"
					// TO-DO : Add Name-Label
					// TO-DO : IF NOT FINISHED, THEN LOADING SYM OVERLAY
					el.insertBefore(pDiv,addDiv);
				});
				
			}
			
			document.addEventListener('DOMContentLoaded', function() {
  				showProjects();
			}, false);
		</script>
	</head>
	<body>
		<div id="projectDrawer" class="scrollable" onLoad="showProjects();"> 
			<div id="add-project" class="hideMe" onclick="return hideUpload();">
				<iframe id="myframe" frameborder="0" src="./uploadForm.html" width="600px" height="800px">Your Browser does not support the iframe tag.</iframe>
			</div>
			<h3 style="text-align:center;">Projects</h3>
			<div class="projectContainer" id="projectAdds" class="scrollable">
				<div onclick="return add();"  id="app" name="addProj">
				<p class="centered">+</p>
				<p class="bottom">Add new</p>
				</div>
			</div>
		</div>
		<div id="mainContainer">
			<div id="mainGraph">
				<canvas id="view">
					BROWSER DOES NOT SUPPORT CANVAS.
				</canvas>
			 Such Graph. Much Wow.
			</div>
			<div id="views" class="scrollable">
				<!--
					TO-DO : ADD VIEW-LOADING
				-->
			</div>
			<div id="statusBar">
			 Such status info. Much Wow.
			</div>
			<div id="menuBar">
			 Such menuBar. Much Wow.
			</div>
		</div>
	</body>
</html>